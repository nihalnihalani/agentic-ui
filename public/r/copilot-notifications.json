{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "copilot-notifications",
  "type": "registry:component",
  "title": "CopilotNotifications",
  "description": "Notification center with AI triage, priority sorting, and actions.",
  "dependencies": [
    "@copilotkit/react-core",
    "lucide-react"
  ],
  "registryDependencies": [
    "badge"
  ],
  "docs": "## Setup\n\n### 1. Install CopilotKit dependencies\n\n```bash\nnpm install @copilotkit/react-core @copilotkit/react-ui @copilotkit/runtime\n```\n\n### 2. Create an API route\n\nCreate `app/api/copilotkit/route.ts`:\n\n```ts\nimport {\n  CopilotRuntime,\n  OpenAIAdapter,\n  copilotRuntimeNextJSAppRouterEndpoint,\n} from \"@copilotkit/runtime\";\n\nexport const maxDuration = 60;\n\nconst runtime = new CopilotRuntime();\nconst serviceAdapter = new OpenAIAdapter();\n\nconst { handleRequest } = copilotRuntimeNextJSAppRouterEndpoint({\n  runtime,\n  serviceAdapter,\n  endpoint: \"/api/copilotkit\",\n});\n\nexport { handleRequest as POST };\n```\n\n### 3. Environment variables\n\nAdd to `.env.local`:\n\n```\nOPENAI_API_KEY=sk-...\n```\n\n### 4. Wrap your app with CopilotKit\n\nIn your page or layout, wrap the component tree with the CopilotKit provider and add a chat UI:\n\n```tsx\n\"use client\";\nimport { CopilotKit } from \"@copilotkit/react-core\";\nimport { CopilotPopup } from \"@copilotkit/react-ui\";\nimport \"@copilotkit/react-ui/styles.css\";\n\nexport default function Page() {\n  return (\n    <CopilotKit runtimeUrl=\"/api/copilotkit\">\n      {/* your components here */}\n      <CopilotPopup />\n    </CopilotKit>\n  );\n}\n```\n\n## Usage\n\n```tsx\nimport { CopilotNotifications } from \"@/components/copilot-notifications\";\n\n<CopilotNotifications />\n```\n\nThe component ships with sample notifications. Ask the AI to triage, mark as read, dismiss, or sort by priority.",
  "files": [
    {
      "path": "registry/copilot-notifications.tsx",
      "content": "\"use client\";\n\nimport { useState, useMemo, useCallback } from \"react\";\nimport { useCopilotReadable, useCopilotAction } from \"@copilotkit/react-core\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  Bell,\n  AlertTriangle,\n  MessageSquare,\n  Info,\n  X,\n  Loader2,\n  CheckCircle,\n  Sparkles,\n} from \"lucide-react\";\n\nexport interface NotificationItem {\n  id: string;\n  title: string;\n  message: string;\n  type: \"alert\" | \"message\" | \"update\" | \"reminder\";\n  priority: \"low\" | \"medium\" | \"high\" | \"urgent\";\n  read: boolean;\n  timestamp: string;\n  category?: string;\n}\n\ntype FilterTab = \"all\" | \"unread\" | \"alerts\" | \"messages\";\n\nconst defaultNotifications: NotificationItem[] = [\n  {\n    id: \"notif-1\",\n    title: \"Deployment Failed\",\n    message: \"Production deployment pipeline failed at build step. Immediate attention required.\",\n    type: \"alert\",\n    priority: \"urgent\",\n    read: false,\n    timestamp: \"2 minutes ago\",\n  },\n  {\n    id: \"notif-2\",\n    title: \"New PR Review Request\",\n    message: \"Alex requested your review on PR #472: Refactor auth module.\",\n    type: \"message\",\n    priority: \"high\",\n    read: false,\n    timestamp: \"15 minutes ago\",\n  },\n  {\n    id: \"notif-3\",\n    title: \"System Update Available\",\n    message: \"Version 3.2.1 is available with performance improvements and bug fixes.\",\n    type: \"update\",\n    priority: \"medium\",\n    read: true,\n    timestamp: \"1 hour ago\",\n  },\n  {\n    id: \"notif-4\",\n    title: \"Meeting in 30 minutes\",\n    message: \"Sprint planning meeting starts at 2:00 PM in Room 4B.\",\n    type: \"reminder\",\n    priority: \"medium\",\n    read: false,\n    timestamp: \"30 minutes ago\",\n  },\n  {\n    id: \"notif-5\",\n    title: \"Disk Usage Warning\",\n    message: \"Server disk usage has exceeded 85%. Consider cleaning up old logs.\",\n    type: \"alert\",\n    priority: \"high\",\n    read: false,\n    timestamp: \"45 minutes ago\",\n  },\n  {\n    id: \"notif-6\",\n    title: \"Team message from Alex\",\n    message: \"Hey, can you take a look at the latest design mockups when you get a chance?\",\n    type: \"message\",\n    priority: \"low\",\n    read: true,\n    timestamp: \"2 hours ago\",\n  },\n  {\n    id: \"notif-7\",\n    title: \"Invoice Payment Due\",\n    message: \"Invoice #INV-2024-089 for $2,450.00 is due in 3 days.\",\n    type: \"reminder\",\n    priority: \"high\",\n    read: false,\n    timestamp: \"3 hours ago\",\n  },\n  {\n    id: \"notif-8\",\n    title: \"New Feature Released\",\n    message: \"Dark mode support has been rolled out to all users.\",\n    type: \"update\",\n    priority: \"low\",\n    read: true,\n    timestamp: \"5 hours ago\",\n  },\n  {\n    id: \"notif-9\",\n    title: \"Security Scan Complete\",\n    message: \"Weekly security scan finished. No vulnerabilities detected.\",\n    type: \"alert\",\n    priority: \"medium\",\n    read: true,\n    timestamp: \"6 hours ago\",\n  },\n  {\n    id: \"notif-10\",\n    title: \"Welcome to the team!\",\n    message: \"We're glad to have you on board. Check out the getting started guide.\",\n    type: \"message\",\n    priority: \"low\",\n    read: true,\n    timestamp: \"1 day ago\",\n  },\n];\n\nconst priorityBorderColors: Record<NotificationItem[\"priority\"], string> = {\n  urgent: \"border-l-red-500\",\n  high: \"border-l-amber-500\",\n  medium: \"border-l-blue-500\",\n  low: \"border-l-muted\",\n};\n\nconst priorityBadgeColors: Record<NotificationItem[\"priority\"], string> = {\n  urgent: \"bg-red-500/20 text-red-400 border-red-500/30\",\n  high: \"bg-amber-500/20 text-amber-400 border-amber-500/30\",\n  medium: \"bg-blue-500/20 text-blue-400 border-blue-500/30\",\n  low: \"bg-muted/50 text-muted-foreground border-border/50\",\n};\n\nconst typeIcons: Record<NotificationItem[\"type\"], React.ReactNode> = {\n  alert: <AlertTriangle className=\"h-4 w-4 text-red-400\" />,\n  message: <MessageSquare className=\"h-4 w-4 text-blue-400\" />,\n  update: <Info className=\"h-4 w-4 text-emerald-400\" />,\n  reminder: <Bell className=\"h-4 w-4 text-amber-400\" />,\n};\n\nconst typeBadgeColors: Record<NotificationItem[\"type\"], string> = {\n  alert: \"bg-red-500/10 text-red-400 border-red-500/20\",\n  message: \"bg-blue-500/10 text-blue-400 border-blue-500/20\",\n  update: \"bg-emerald-500/10 text-emerald-400 border-emerald-500/20\",\n  reminder: \"bg-amber-500/10 text-amber-400 border-amber-500/20\",\n};\n\ninterface CopilotNotificationsProps {\n  initialNotifications?: NotificationItem[];\n  className?: string;\n}\n\nexport function CopilotNotifications({\n  initialNotifications = defaultNotifications,\n  className,\n}: CopilotNotificationsProps) {\n  const [notifications, setNotifications] =\n    useState<NotificationItem[]>(initialNotifications);\n  const [activeTab, setActiveTab] = useState<FilterTab>(\"all\");\n  const [dismissingIds, setDismissingIds] = useState<Set<string>>(new Set());\n\n  const filteredNotifications = useMemo(() => {\n    switch (activeTab) {\n      case \"unread\":\n        return notifications.filter((n) => !n.read);\n      case \"alerts\":\n        return notifications.filter((n) => n.type === \"alert\");\n      case \"messages\":\n        return notifications.filter((n) => n.type === \"message\");\n      default:\n        return notifications;\n    }\n  }, [notifications, activeTab]);\n\n  const unreadCount = useMemo(\n    () => notifications.filter((n) => !n.read).length,\n    [notifications]\n  );\n\n  const dismissNotification = useCallback((id: string) => {\n    setDismissingIds((prev) => new Set(prev).add(id));\n    setTimeout(() => {\n      setNotifications((prev) => prev.filter((n) => n.id !== id));\n      setDismissingIds((prev) => {\n        const next = new Set(prev);\n        next.delete(id);\n        return next;\n      });\n    }, 300);\n  }, []);\n\n  // Expose notifications state to AI\n  useCopilotReadable({\n    description:\n      \"Current notification center state including all notifications with their read status, priority, type, and category\",\n    value: {\n      totalNotifications: notifications.length,\n      unreadCount,\n      activeFilter: activeTab,\n      notifications: notifications.map((n) => ({\n        id: n.id,\n        title: n.title,\n        message: n.message,\n        type: n.type,\n        priority: n.priority,\n        read: n.read,\n        timestamp: n.timestamp,\n        category: n.category,\n      })),\n    },\n  });\n\n  // AI action: mark notification as read\n  useCopilotAction({\n    name: \"markAsRead\",\n    description:\n      \"Mark one or more notifications as read. Provide an array of notification IDs to mark as read, or pass a single ID.\",\n    parameters: [\n      {\n        name: \"notificationIds\",\n        type: \"string[]\",\n        description: \"Array of notification IDs to mark as read\",\n        required: true,\n      },\n    ],\n    render: ({ status, args }) => {\n      if (status === \"inProgress\") {\n        return (\n          <div className=\"flex items-center gap-2 rounded-lg border border-border/50 bg-card/50 px-3 py-2 text-sm\">\n            <Loader2 className=\"h-4 w-4 animate-spin text-emerald-400\" />\n            <span>Marking as read...</span>\n          </div>\n        );\n      }\n      const count = args.notificationIds?.length ?? 0;\n      return (\n        <div className=\"flex items-center gap-2 rounded-lg border border-emerald-500/30 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-400\">\n          <CheckCircle className=\"h-4 w-4\" />\n          <span>\n            Marked <strong>{count}</strong> notification{count !== 1 ? \"s\" : \"\"} as read\n          </span>\n        </div>\n      );\n    },\n    handler: ({ notificationIds }) => {\n      const ids = new Set(notificationIds as string[]);\n      setNotifications((prev) =>\n        prev.map((n) => (ids.has(n.id) ? { ...n, read: true } : n))\n      );\n      return `Marked ${ids.size} notification(s) as read`;\n    },\n  });\n\n  // AI action: dismiss notification\n  useCopilotAction({\n    name: \"dismissNotification\",\n    description:\n      \"Dismiss and remove one or more notifications from the list. The notifications will fade out before being removed.\",\n    parameters: [\n      {\n        name: \"notificationIds\",\n        type: \"string[]\",\n        description: \"Array of notification IDs to dismiss\",\n        required: true,\n      },\n    ],\n    render: ({ status, args }) => {\n      if (status === \"inProgress\") {\n        return (\n          <div className=\"flex items-center gap-2 rounded-lg border border-border/50 bg-card/50 px-3 py-2 text-sm\">\n            <Loader2 className=\"h-4 w-4 animate-spin text-red-400\" />\n            <span>Dismissing notifications...</span>\n          </div>\n        );\n      }\n      const count = args.notificationIds?.length ?? 0;\n      return (\n        <div className=\"flex items-center gap-2 rounded-lg border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-400\">\n          <CheckCircle className=\"h-4 w-4\" />\n          <span>\n            Dismissed <strong>{count}</strong> notification{count !== 1 ? \"s\" : \"\"}\n          </span>\n        </div>\n      );\n    },\n    handler: ({ notificationIds }) => {\n      for (const id of notificationIds as string[]) {\n        dismissNotification(id);\n      }\n      return `Dismissed ${(notificationIds as string[]).length} notification(s)`;\n    },\n  });\n\n  // AI action: categorize notifications\n  useCopilotAction({\n    name: \"categorize\",\n    description:\n      \"Assign a category label to one or more notifications for organizational purposes\",\n    parameters: [\n      {\n        name: \"notificationIds\",\n        type: \"string[]\",\n        description: \"Array of notification IDs to categorize\",\n        required: true,\n      },\n      {\n        name: \"category\",\n        type: \"string\",\n        description: \"The category label to assign (e.g., 'work', 'personal', 'infrastructure', 'billing')\",\n        required: true,\n      },\n    ],\n    render: ({ status, args }) => {\n      if (status === \"inProgress\") {\n        return (\n          <div className=\"flex items-center gap-2 rounded-lg border border-border/50 bg-card/50 px-3 py-2 text-sm\">\n            <Loader2 className=\"h-4 w-4 animate-spin text-violet-400\" />\n            <span>Categorizing notifications...</span>\n          </div>\n        );\n      }\n      const count = args.notificationIds?.length ?? 0;\n      return (\n        <div className=\"flex items-center gap-2 rounded-lg border border-violet-500/30 bg-violet-500/10 px-3 py-2 text-sm text-violet-400\">\n          <CheckCircle className=\"h-4 w-4\" />\n          <span>\n            Categorized <strong>{count}</strong> notification{count !== 1 ? \"s\" : \"\"} as{\" \"}\n            <strong>{args.category}</strong>\n          </span>\n        </div>\n      );\n    },\n    handler: ({ notificationIds, category }) => {\n      const ids = new Set(notificationIds as string[]);\n      setNotifications((prev) =>\n        prev.map((n) => (ids.has(n.id) ? { ...n, category } : n))\n      );\n      return `Categorized ${ids.size} notification(s) as \"${category}\"`;\n    },\n  });\n\n  // AI action: prioritize notification\n  useCopilotAction({\n    name: \"prioritize\",\n    description:\n      \"Change the priority level of one or more notifications. Valid priorities: low, medium, high, urgent.\",\n    parameters: [\n      {\n        name: \"notificationIds\",\n        type: \"string[]\",\n        description: \"Array of notification IDs to re-prioritize\",\n        required: true,\n      },\n      {\n        name: \"priority\",\n        type: \"string\",\n        description: 'The new priority level: \"low\", \"medium\", \"high\", or \"urgent\"',\n        required: true,\n      },\n    ],\n    render: ({ status, args }) => {\n      if (status === \"inProgress\") {\n        return (\n          <div className=\"flex items-center gap-2 rounded-lg border border-border/50 bg-card/50 px-3 py-2 text-sm\">\n            <Loader2 className=\"h-4 w-4 animate-spin text-amber-400\" />\n            <span>Updating priority...</span>\n          </div>\n        );\n      }\n      const count = args.notificationIds?.length ?? 0;\n      return (\n        <div className=\"flex items-center gap-2 rounded-lg border border-amber-500/30 bg-amber-500/10 px-3 py-2 text-sm text-amber-400\">\n          <CheckCircle className=\"h-4 w-4\" />\n          <span>\n            Set <strong>{count}</strong> notification{count !== 1 ? \"s\" : \"\"} to{\" \"}\n            <strong>{args.priority}</strong> priority\n          </span>\n        </div>\n      );\n    },\n    handler: ({ notificationIds, priority }) => {\n      const ids = new Set(notificationIds as string[]);\n      const validPriority = priority as NotificationItem[\"priority\"];\n      setNotifications((prev) =>\n        prev.map((n) =>\n          ids.has(n.id) ? { ...n, priority: validPriority } : n\n        )\n      );\n      return `Updated ${ids.size} notification(s) to ${priority} priority`;\n    },\n  });\n\n  // AI action: summarize all notifications\n  useCopilotAction({\n    name: \"summarizeAll\",\n    description:\n      \"Generate a summary of all current notifications. Returns a structured overview of the notification center state for the AI to present to the user.\",\n    parameters: [],\n    render: ({ status }) => {\n      if (status === \"inProgress\") {\n        return (\n          <div className=\"flex items-center gap-2 rounded-lg border border-border/50 bg-card/50 px-3 py-2 text-sm\">\n            <Loader2 className=\"h-4 w-4 animate-spin text-blue-400\" />\n            <span>Summarizing notifications...</span>\n          </div>\n        );\n      }\n      return (\n        <div className=\"flex items-center gap-2 rounded-lg border border-blue-500/30 bg-blue-500/10 px-3 py-2 text-sm text-blue-400\">\n          <CheckCircle className=\"h-4 w-4\" />\n          <span>Notification summary generated</span>\n        </div>\n      );\n    },\n    handler: () => {\n      const urgentCount = notifications.filter(\n        (n) => n.priority === \"urgent\"\n      ).length;\n      const highCount = notifications.filter(\n        (n) => n.priority === \"high\"\n      ).length;\n      const alertCount = notifications.filter(\n        (n) => n.type === \"alert\"\n      ).length;\n      const messageCount = notifications.filter(\n        (n) => n.type === \"message\"\n      ).length;\n      const categories = [\n        ...new Set(notifications.map((n) => n.category).filter(Boolean)),\n      ];\n\n      return JSON.stringify({\n        total: notifications.length,\n        unread: unreadCount,\n        byPriority: { urgent: urgentCount, high: highCount },\n        byType: { alerts: alertCount, messages: messageCount },\n        categories,\n        topUrgent: notifications\n          .filter((n) => n.priority === \"urgent\" || n.priority === \"high\")\n          .map((n) => ({ id: n.id, title: n.title, type: n.type })),\n      });\n    },\n  });\n\n  const tabs: { key: FilterTab; label: string; count?: number }[] = [\n    { key: \"all\", label: \"All\", count: notifications.length },\n    { key: \"unread\", label: \"Unread\", count: unreadCount },\n    {\n      key: \"alerts\",\n      label: \"Alerts\",\n      count: notifications.filter((n) => n.type === \"alert\").length,\n    },\n    {\n      key: \"messages\",\n      label: \"Messages\",\n      count: notifications.filter((n) => n.type === \"message\").length,\n    },\n  ];\n\n  return (\n    <div className={cn(\"flex flex-col w-full max-w-xl\", className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-border/50\">\n        <div className=\"flex items-center gap-2\">\n          <Bell className=\"h-5 w-5 text-foreground\" />\n          <h2 className=\"text-sm font-semibold text-foreground\">\n            Notifications\n          </h2>\n          {unreadCount > 0 && (\n            <span className=\"flex items-center justify-center rounded-full bg-red-500 px-1.5 py-0.5 text-[10px] font-medium text-white min-w-[18px]\">\n              {unreadCount}\n            </span>\n          )}\n        </div>\n        <button\n          onClick={() =>\n            setNotifications((prev) => prev.map((n) => ({ ...n, read: true })))\n          }\n          className=\"text-xs text-muted-foreground hover:text-foreground transition-colors\"\n        >\n          Mark all read\n        </button>\n      </div>\n\n      {/* Filter tabs */}\n      <div className=\"flex items-center gap-1 px-4 py-2 border-b border-border/30\">\n        {tabs.map((tab) => (\n          <button\n            key={tab.key}\n            onClick={() => setActiveTab(tab.key)}\n            className={cn(\n              \"flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-xs font-medium transition-colors\",\n              activeTab === tab.key\n                ? \"bg-muted text-foreground\"\n                : \"text-muted-foreground hover:text-foreground hover:bg-muted/50\"\n            )}\n          >\n            {tab.label}\n            {tab.count !== undefined && tab.count > 0 && (\n              <span\n                className={cn(\n                  \"rounded-full px-1.5 py-0.5 text-[10px]\",\n                  activeTab === tab.key\n                    ? \"bg-foreground/10 text-foreground\"\n                    : \"bg-muted/50 text-muted-foreground\"\n                )}\n              >\n                {tab.count}\n              </span>\n            )}\n          </button>\n        ))}\n      </div>\n\n      {/* Notification list */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {filteredNotifications.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center py-12 text-muted-foreground\">\n            <Sparkles className=\"h-8 w-8 mb-2 text-muted-foreground/40\" />\n            <p className=\"text-sm\">No notifications</p>\n            <p className=\"text-xs text-muted-foreground/60 mt-1\">\n              You&apos;re all caught up!\n            </p>\n          </div>\n        ) : (\n          <div className=\"flex flex-col\">\n            {filteredNotifications.map((notification) => (\n              <div\n                key={notification.id}\n                className={cn(\n                  \"relative flex gap-3 border-b border-border/20 border-l-4 px-4 py-3 transition-all duration-300\",\n                  priorityBorderColors[notification.priority],\n                  !notification.read && \"bg-muted/20\",\n                  dismissingIds.has(notification.id) &&\n                    \"opacity-0 translate-x-4\"\n                )}\n              >\n                {/* Type icon */}\n                <div className=\"mt-0.5 shrink-0\">{typeIcons[notification.type]}</div>\n\n                {/* Content */}\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-start justify-between gap-2\">\n                    <div className=\"flex items-center gap-2 min-w-0\">\n                      {/* Unread indicator dot */}\n                      {!notification.read && (\n                        <span className=\"inline-block h-2 w-2 shrink-0 rounded-full bg-blue-500\" />\n                      )}\n                      <p\n                        className={cn(\n                          \"text-sm truncate\",\n                          !notification.read\n                            ? \"font-semibold text-foreground\"\n                            : \"font-medium text-foreground/80\"\n                        )}\n                      >\n                        {notification.title}\n                      </p>\n                    </div>\n                    <button\n                      onClick={() => dismissNotification(notification.id)}\n                      className=\"shrink-0 rounded p-0.5 text-muted-foreground/40 hover:text-foreground transition-colors\"\n                      aria-label={`Dismiss ${notification.title}`}\n                    >\n                      <X className=\"h-3.5 w-3.5\" />\n                    </button>\n                  </div>\n\n                  <p className=\"mt-0.5 text-xs text-muted-foreground leading-relaxed line-clamp-2\">\n                    {notification.message}\n                  </p>\n\n                  {/* Badges and timestamp */}\n                  <div className=\"mt-2 flex items-center gap-2 flex-wrap\">\n                    <Badge\n                      className={cn(\n                        \"text-[10px] font-medium capitalize\",\n                        priorityBadgeColors[notification.priority]\n                      )}\n                    >\n                      {notification.priority}\n                    </Badge>\n                    <Badge\n                      className={cn(\n                        \"text-[10px] font-medium capitalize\",\n                        typeBadgeColors[notification.type]\n                      )}\n                    >\n                      {notification.type}\n                    </Badge>\n                    {notification.category && (\n                      <Badge className=\"text-[10px] font-medium bg-violet-500/10 text-violet-400 border-violet-500/20\">\n                        {notification.category}\n                      </Badge>\n                    )}\n                    <span className=\"ml-auto text-[10px] text-muted-foreground/60\">\n                      {notification.timestamp}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Footer */}\n      <div className=\"flex items-center justify-between border-t border-border/50 px-4 py-2 text-xs text-muted-foreground\">\n        <span>\n          {filteredNotifications.length} of {notifications.length} notifications\n        </span>\n        {unreadCount > 0 && (\n          <span className=\"text-blue-400\">{unreadCount} unread</span>\n        )}\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}