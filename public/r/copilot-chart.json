{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "copilot-chart",
  "type": "registry:component",
  "title": "CopilotChart",
  "description": "Bar and line charts with AI annotations and trend analysis.",
  "dependencies": [
    "@copilotkit/react-core",
    "lucide-react"
  ],
  "registryDependencies": [],
  "docs": "## Setup\n\n### 1. Install CopilotKit dependencies\n\n```bash\nnpm install @copilotkit/react-core @copilotkit/react-ui @copilotkit/runtime\n```\n\n### 2. Create an API route\n\nCreate `app/api/copilotkit/route.ts`:\n\n```ts\nimport {\n  CopilotRuntime,\n  OpenAIAdapter,\n  copilotRuntimeNextJSAppRouterEndpoint,\n} from \"@copilotkit/runtime\";\n\nexport const maxDuration = 60;\n\nconst runtime = new CopilotRuntime();\nconst serviceAdapter = new OpenAIAdapter();\n\nconst { handleRequest } = copilotRuntimeNextJSAppRouterEndpoint({\n  runtime,\n  serviceAdapter,\n  endpoint: \"/api/copilotkit\",\n});\n\nexport { handleRequest as POST };\n```\n\n### 3. Environment variables\n\nAdd to `.env.local`:\n\n```\nOPENAI_API_KEY=sk-...\n```\n\n### 4. Wrap your app with CopilotKit\n\nIn your page or layout, wrap the component tree with the CopilotKit provider and add a chat UI:\n\n```tsx\n\"use client\";\nimport { CopilotKit } from \"@copilotkit/react-core\";\nimport { CopilotPopup } from \"@copilotkit/react-ui\";\nimport \"@copilotkit/react-ui/styles.css\";\n\nexport default function Page() {\n  return (\n    <CopilotKit runtimeUrl=\"/api/copilotkit\">\n      {/* your components here */}\n      <CopilotPopup />\n    </CopilotKit>\n  );\n}\n```\n\n## Usage\n\n```tsx\nimport { CopilotChart } from \"@/components/copilot-chart\";\n\n<CopilotChart />\n```\n\nOr with custom data:\n\n```tsx\nimport { CopilotChart, ChartDataPoint } from \"@/components/copilot-chart\";\n\nconst data: ChartDataPoint[] = [\n  { month: \"Jan\", revenue: 28400, users: 820, growth: 4 },\n  { month: \"Feb\", revenue: 31200, users: 910, growth: 7 },\n];\n\n<CopilotChart data={data} />\n```\n\nAsk the AI to annotate data points, switch chart types, or analyze trends.",
  "files": [
    {
      "path": "registry/copilot-chart.tsx",
      "content": "\"use client\";\n\nimport { useState, useMemo, useCallback } from \"react\";\nimport { useCopilotReadable, useCopilotAction } from \"@copilotkit/react-core\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface ChartDataPoint {\n  month: string;\n  revenue: number;\n  users: number;\n  growth: number;\n}\n\ninterface Annotation {\n  index: number;\n  label: string;\n}\n\nconst DEFAULT_DATA: ChartDataPoint[] = [\n  { month: \"Jan\", revenue: 28400, users: 820, growth: 4 },\n  { month: \"Feb\", revenue: 31200, users: 910, growth: 7 },\n  { month: \"Mar\", revenue: 29800, users: 880, growth: -2 },\n  { month: \"Apr\", revenue: 34500, users: 1050, growth: 12 },\n  { month: \"May\", revenue: 38900, users: 1200, growth: 14 },\n  { month: \"Jun\", revenue: 42100, users: 1380, growth: 8 },\n  { month: \"Jul\", revenue: 39700, users: 1340, growth: -3 },\n  { month: \"Aug\", revenue: 45600, users: 1520, growth: 11 },\n  { month: \"Sep\", revenue: 49200, users: 1740, growth: 15 },\n  { month: \"Oct\", revenue: 53800, users: 1950, growth: 18 },\n  { month: \"Nov\", revenue: 56400, users: 2180, growth: 10 },\n  { month: \"Dec\", revenue: 62100, users: 2400, growth: 16 },\n];\n\ninterface CopilotChartProps {\n  data?: ChartDataPoint[];\n  className?: string;\n}\n\nexport function CopilotChart({\n  data = DEFAULT_DATA,\n  className,\n}: CopilotChartProps) {\n  const [chartType, setChartType] = useState<\"bar\" | \"line\">(\"bar\");\n  const [dateRange, setDateRange] = useState<{ start: number; end: number }>({\n    start: 0,\n    end: data.length - 1,\n  });\n  const [highlightedIndex, setHighlightedIndex] = useState<number | null>(null);\n  const [annotations, setAnnotations] = useState<Annotation[]>([]);\n\n  const filteredData = useMemo(\n    () => data.slice(dateRange.start, dateRange.end + 1),\n    [data, dateRange]\n  );\n\n  const maxRevenue = useMemo(\n    () => Math.max(...filteredData.map((d) => d.revenue)),\n    [filteredData]\n  );\n\n  // Chart layout constants\n  const svgWidth = 720;\n  const svgHeight = 360;\n  const paddingLeft = 70;\n  const paddingRight = 20;\n  const paddingTop = 40;\n  const paddingBottom = 50;\n  const chartWidth = svgWidth - paddingLeft - paddingRight;\n  const chartHeight = svgHeight - paddingTop - paddingBottom;\n\n  // Axis scale helpers\n  const niceMax = useMemo(() => {\n    const raw = maxRevenue * 1.1;\n    const step = Math.pow(10, Math.floor(Math.log10(raw)));\n    return Math.ceil(raw / step) * step;\n  }, [maxRevenue]);\n\n  const yTicks = useMemo(() => {\n    const count = 5;\n    return Array.from({ length: count + 1 }, (_, i) =>\n      Math.round((niceMax / count) * i)\n    );\n  }, [niceMax]);\n\n  const scaleY = useCallback(\n    (value: number) => {\n      return paddingTop + chartHeight - (value / niceMax) * chartHeight;\n    },\n    [niceMax, chartHeight]\n  );\n\n  const barWidth = useMemo(() => {\n    const count = filteredData.length;\n    if (count === 0) return 0;\n    const gap = 8;\n    return Math.max(12, (chartWidth - gap * (count - 1)) / count);\n  }, [filteredData.length, chartWidth]);\n\n  const getBarX = useCallback(\n    (index: number) => {\n      const count = filteredData.length;\n      if (count === 0) return paddingLeft;\n      const totalBarsWidth = barWidth * count;\n      const totalGaps = chartWidth - totalBarsWidth;\n      const gap = count > 1 ? totalGaps / (count - 1) : 0;\n      return paddingLeft + index * (barWidth + gap);\n    },\n    [filteredData.length, barWidth, chartWidth]\n  );\n\n  const getPointX = useCallback(\n    (index: number) => {\n      return getBarX(index) + barWidth / 2;\n    },\n    [getBarX, barWidth]\n  );\n\n  // Build the SVG line path\n  const linePath = useMemo(() => {\n    if (filteredData.length === 0) return \"\";\n    return filteredData\n      .map((d, i) => {\n        const x = getPointX(i);\n        const y = scaleY(d.revenue);\n        return `${i === 0 ? \"M\" : \"L\"} ${x} ${y}`;\n      })\n      .join(\" \");\n  }, [filteredData, getPointX, scaleY]);\n\n  // Resolve the highlighted index relative to filteredData\n  const resolvedHighlight = useMemo(() => {\n    if (highlightedIndex === null) return null;\n    const offsetIndex = highlightedIndex - dateRange.start;\n    if (offsetIndex < 0 || offsetIndex >= filteredData.length) return null;\n    return offsetIndex;\n  }, [highlightedIndex, dateRange.start, filteredData.length]);\n\n  // Resolve annotations relative to filteredData\n  const resolvedAnnotations = useMemo(() => {\n    return annotations\n      .map((a) => ({\n        ...a,\n        offsetIndex: a.index - dateRange.start,\n      }))\n      .filter(\n        (a) => a.offsetIndex >= 0 && a.offsetIndex < filteredData.length\n      );\n  }, [annotations, dateRange.start, filteredData.length]);\n\n  const formatRevenue = (val: number) => {\n    if (val >= 1000) return `$${(val / 1000).toFixed(0)}k`;\n    return `$${val}`;\n  };\n\n  // Expose chart state to AI\n  useCopilotReadable({\n    description:\n      \"Current chart state including data points, chart type, visible date range, highlighted point, and annotations\",\n    value: {\n      chartType,\n      totalDataPoints: data.length,\n      visibleDataPoints: filteredData.length,\n      dateRange: {\n        startMonth: data[dateRange.start]?.month,\n        endMonth: data[dateRange.end]?.month,\n        startIndex: dateRange.start,\n        endIndex: dateRange.end,\n      },\n      highlightedIndex,\n      annotations,\n      data: filteredData,\n    },\n  });\n\n  // AI action: change chart type\n  useCopilotAction({\n    name: \"changeChartType\",\n    description:\n      'Switch the chart visualization between bar chart and line chart. Use \"bar\" or \"line\".',\n    parameters: [\n      {\n        name: \"type\",\n        type: \"string\",\n        description: 'The chart type to switch to: \"bar\" or \"line\"',\n        required: true,\n      },\n    ],\n    render: ({ status, args }) => {\n      if (status === \"inProgress\") {\n        return (\n          <div className=\"flex items-center gap-2 rounded-lg border border-border/50 bg-card/50 px-3 py-2 text-sm\">\n            <svg\n              className=\"h-4 w-4 animate-spin text-blue-400\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n            >\n              <path d=\"M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83\" />\n            </svg>\n            <span>Switching chart type...</span>\n          </div>\n        );\n      }\n      return (\n        <div className=\"flex items-center gap-2 rounded-lg border border-blue-500/30 bg-blue-500/10 px-3 py-2 text-sm text-blue-400\">\n          <svg\n            className=\"h-4 w-4\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n          >\n            {args.type === \"bar\" ? (\n              <>\n                <rect x=\"3\" y=\"12\" width=\"4\" height=\"9\" rx=\"1\" />\n                <rect x=\"10\" y=\"7\" width=\"4\" height=\"14\" rx=\"1\" />\n                <rect x=\"17\" y=\"3\" width=\"4\" height=\"18\" rx=\"1\" />\n              </>\n            ) : (\n              <polyline points=\"3 17 9 11 13 15 21 7\" />\n            )}\n          </svg>\n          <span>\n            Switched to <strong>{args.type}</strong> chart\n          </span>\n        </div>\n      );\n    },\n    handler: ({ type }) => {\n      if (type !== \"bar\" && type !== \"line\") {\n        return `Invalid chart type \"${type}\". Use \"bar\" or \"line\".`;\n      }\n      setChartType(type);\n      return `Chart type changed to ${type}`;\n    },\n  });\n\n  // AI action: filter date range\n  useCopilotAction({\n    name: \"filterDateRange\",\n    description:\n      \"Filter the chart to show only data points within a specific index range (0-based). For example, startIndex=0 endIndex=5 shows Jan through Jun.\",\n    parameters: [\n      {\n        name: \"startIndex\",\n        type: \"number\",\n        description:\n          \"The start index (0-based, inclusive). 0 = Jan, 11 = Dec.\",\n        required: true,\n      },\n      {\n        name: \"endIndex\",\n        type: \"number\",\n        description:\n          \"The end index (0-based, inclusive). 0 = Jan, 11 = Dec.\",\n        required: true,\n      },\n    ],\n    render: ({ status, args }) => {\n      if (status === \"inProgress\") {\n        return (\n          <div className=\"flex items-center gap-2 rounded-lg border border-border/50 bg-card/50 px-3 py-2 text-sm\">\n            <svg\n              className=\"h-4 w-4 animate-pulse text-purple-400\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n            >\n              <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" />\n              <path d=\"M16 2v4M8 2v4M3 10h18\" />\n            </svg>\n            <span>Filtering date range...</span>\n          </div>\n        );\n      }\n      const startMonth = data[args.startIndex ?? 0]?.month ?? \"?\";\n      const endMonth = data[args.endIndex ?? data.length - 1]?.month ?? \"?\";\n      return (\n        <div className=\"flex items-center gap-2 rounded-lg border border-purple-500/30 bg-purple-500/10 px-3 py-2 text-sm text-purple-400\">\n          <svg\n            className=\"h-4 w-4\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n          >\n            <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" />\n            <path d=\"M16 2v4M8 2v4M3 10h18\" />\n          </svg>\n          <span>\n            Showing <strong>{startMonth}</strong> to{\" \"}\n            <strong>{endMonth}</strong>\n          </span>\n        </div>\n      );\n    },\n    handler: ({ startIndex, endIndex }) => {\n      const clampedStart = Math.max(0, Math.min(startIndex, data.length - 1));\n      const clampedEnd = Math.max(\n        clampedStart,\n        Math.min(endIndex, data.length - 1)\n      );\n      setDateRange({ start: clampedStart, end: clampedEnd });\n      return `Date range set to ${data[clampedStart]?.month} - ${data[clampedEnd]?.month}`;\n    },\n  });\n\n  // AI action: highlight data point\n  useCopilotAction({\n    name: \"highlightDataPoint\",\n    description:\n      \"Highlight a specific data point on the chart with a glow effect. Use the 0-based index of the data point in the full dataset.\",\n    parameters: [\n      {\n        name: \"index\",\n        type: \"number\",\n        description:\n          \"The 0-based index of the data point to highlight. 0 = Jan, 11 = Dec.\",\n        required: true,\n      },\n    ],\n    render: ({ status, args }) => {\n      if (status === \"inProgress\") {\n        return (\n          <div className=\"flex items-center gap-2 rounded-lg border border-border/50 bg-card/50 px-3 py-2 text-sm\">\n            <svg\n              className=\"h-4 w-4 animate-pulse text-emerald-400\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n            >\n              <polygon points=\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\" />\n            </svg>\n            <span>Highlighting data point...</span>\n          </div>\n        );\n      }\n      const month = data[args.index ?? 0]?.month ?? \"?\";\n      return (\n        <div className=\"flex items-center gap-2 rounded-lg border border-emerald-500/30 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-400\">\n          <svg\n            className=\"h-4 w-4\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n          >\n            <polygon points=\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\" />\n          </svg>\n          <span>\n            Highlighted <strong>{month}</strong>\n          </span>\n        </div>\n      );\n    },\n    handler: ({ index }) => {\n      if (index < 0 || index >= data.length) {\n        return `Index ${index} is out of range (0-${data.length - 1})`;\n      }\n      setHighlightedIndex(index);\n      return `Highlighted data point at index ${index} (${data[index]?.month})`;\n    },\n  });\n\n  // AI action: add annotation\n  useCopilotAction({\n    name: \"addAnnotation\",\n    description:\n      \"Add a text annotation above a specific data point on the chart. Use the 0-based index of the data point.\",\n    parameters: [\n      {\n        name: \"index\",\n        type: \"number\",\n        description:\n          \"The 0-based index of the data point to annotate. 0 = Jan, 11 = Dec.\",\n        required: true,\n      },\n      {\n        name: \"label\",\n        type: \"string\",\n        description: \"The annotation text to display above the data point\",\n        required: true,\n      },\n    ],\n    render: ({ status, args }) => {\n      if (status === \"inProgress\") {\n        return (\n          <div className=\"flex items-center gap-2 rounded-lg border border-border/50 bg-card/50 px-3 py-2 text-sm\">\n            <svg\n              className=\"h-4 w-4 animate-pulse text-amber-400\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n            >\n              <path d=\"M12 20h9M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4 12.5-12.5z\" />\n            </svg>\n            <span>Adding annotation...</span>\n          </div>\n        );\n      }\n      const month = data[args.index ?? 0]?.month ?? \"?\";\n      return (\n        <div className=\"flex items-center gap-2 rounded-lg border border-amber-500/30 bg-amber-500/10 px-3 py-2 text-sm text-amber-400\">\n          <svg\n            className=\"h-4 w-4\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n          >\n            <path d=\"M12 20h9M16.5 3.5a2.121 2.121 0 013 3L7 19l-4 1 1-4 12.5-12.5z\" />\n          </svg>\n          <span>\n            Annotated <strong>{month}</strong>: &quot;{args.label}&quot;\n          </span>\n        </div>\n      );\n    },\n    handler: ({ index, label }) => {\n      if (index < 0 || index >= data.length) {\n        return `Index ${index} is out of range (0-${data.length - 1})`;\n      }\n      setAnnotations((prev) => [...prev, { index, label }]);\n      return `Annotation \"${label}\" added at index ${index} (${data[index]?.month})`;\n    },\n  });\n\n  return (\n    <div className={cn(\"w-full\", className)}>\n      {/* Header controls */}\n      <div className=\"mb-3 flex items-center justify-between\">\n        <h3 className=\"text-sm font-semibold text-foreground\">\n          SaaS Revenue Overview\n        </h3>\n        <div className=\"flex items-center gap-1 rounded-lg border border-border/50 p-0.5\">\n          <button\n            onClick={() => setChartType(\"bar\")}\n            className={cn(\n              \"rounded-md px-3 py-1 text-xs font-medium transition-colors\",\n              chartType === \"bar\"\n                ? \"bg-blue-500/20 text-blue-400\"\n                : \"text-muted-foreground hover:text-foreground\"\n            )}\n          >\n            Bar\n          </button>\n          <button\n            onClick={() => setChartType(\"line\")}\n            className={cn(\n              \"rounded-md px-3 py-1 text-xs font-medium transition-colors\",\n              chartType === \"line\"\n                ? \"bg-violet-500/20 text-violet-400\"\n                : \"text-muted-foreground hover:text-foreground\"\n            )}\n          >\n            Line\n          </button>\n        </div>\n      </div>\n\n      {/* Active state badges */}\n      {(dateRange.start !== 0 ||\n        dateRange.end !== data.length - 1 ||\n        highlightedIndex !== null ||\n        annotations.length > 0) && (\n        <div className=\"mb-3 flex flex-wrap items-center gap-2\">\n          {(dateRange.start !== 0 || dateRange.end !== data.length - 1) && (\n            <span className=\"inline-flex items-center gap-1.5 rounded-md border border-purple-500/30 bg-purple-500/10 px-2.5 py-1 text-xs text-purple-400\">\n              Range: {data[dateRange.start]?.month} -{\" \"}\n              {data[dateRange.end]?.month}\n              <button\n                onClick={() =>\n                  setDateRange({ start: 0, end: data.length - 1 })\n                }\n                className=\"ml-0.5 rounded hover:text-purple-300\"\n              >\n                <svg\n                  className=\"h-3 w-3\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                >\n                  <path d=\"M18 6L6 18M6 6l12 12\" />\n                </svg>\n              </button>\n            </span>\n          )}\n          {highlightedIndex !== null && (\n            <span className=\"inline-flex items-center gap-1.5 rounded-md border border-emerald-500/30 bg-emerald-500/10 px-2.5 py-1 text-xs text-emerald-400\">\n              Highlight: {data[highlightedIndex]?.month}\n              <button\n                onClick={() => setHighlightedIndex(null)}\n                className=\"ml-0.5 rounded hover:text-emerald-300\"\n              >\n                <svg\n                  className=\"h-3 w-3\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                >\n                  <path d=\"M18 6L6 18M6 6l12 12\" />\n                </svg>\n              </button>\n            </span>\n          )}\n          {annotations.length > 0 && (\n            <span className=\"inline-flex items-center gap-1.5 rounded-md border border-amber-500/30 bg-amber-500/10 px-2.5 py-1 text-xs text-amber-400\">\n              {annotations.length} annotation(s)\n              <button\n                onClick={() => setAnnotations([])}\n                className=\"ml-0.5 rounded hover:text-amber-300\"\n              >\n                <svg\n                  className=\"h-3 w-3\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                >\n                  <path d=\"M18 6L6 18M6 6l12 12\" />\n                </svg>\n              </button>\n            </span>\n          )}\n          <button\n            onClick={() => {\n              setDateRange({ start: 0, end: data.length - 1 });\n              setHighlightedIndex(null);\n              setAnnotations([]);\n            }}\n            className=\"ml-auto text-xs text-muted-foreground hover:text-foreground transition-colors\"\n          >\n            Clear all\n          </button>\n        </div>\n      )}\n\n      {/* Chart */}\n      <div className=\"overflow-hidden rounded-lg border border-border/50\">\n        <svg\n          viewBox={`0 0 ${svgWidth} ${svgHeight}`}\n          className=\"w-full\"\n          role=\"img\"\n          aria-label={`${chartType === \"bar\" ? \"Bar\" : \"Line\"} chart showing SaaS revenue from ${filteredData[0]?.month ?? \"\"} to ${filteredData[filteredData.length - 1]?.month ?? \"\"}`}\n        >\n          {/* SVG defs for glow filter */}\n          <defs>\n            <filter id=\"glow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\n              <feGaussianBlur stdDeviation=\"4\" result=\"blur\" />\n              <feFlood floodColor=\"#10b981\" floodOpacity=\"0.6\" result=\"color\" />\n              <feComposite in=\"color\" in2=\"blur\" operator=\"in\" result=\"shadow\" />\n              <feMerge>\n                <feMergeNode in=\"shadow\" />\n                <feMergeNode in=\"shadow\" />\n                <feMergeNode in=\"SourceGraphic\" />\n              </feMerge>\n            </filter>\n          </defs>\n\n          {/* Y-axis grid lines and labels */}\n          {yTicks.map((tick) => {\n            const y = scaleY(tick);\n            return (\n              <g key={tick}>\n                <line\n                  x1={paddingLeft}\n                  y1={y}\n                  x2={svgWidth - paddingRight}\n                  y2={y}\n                  stroke=\"currentColor\"\n                  strokeOpacity={0.08}\n                  strokeDasharray=\"4 4\"\n                />\n                <text\n                  x={paddingLeft - 10}\n                  y={y + 4}\n                  textAnchor=\"end\"\n                  className=\"fill-muted-foreground\"\n                  fontSize=\"11\"\n                >\n                  {formatRevenue(tick)}\n                </text>\n              </g>\n            );\n          })}\n\n          {/* X-axis baseline */}\n          <line\n            x1={paddingLeft}\n            y1={paddingTop + chartHeight}\n            x2={svgWidth - paddingRight}\n            y2={paddingTop + chartHeight}\n            stroke=\"currentColor\"\n            strokeOpacity={0.15}\n          />\n\n          {/* Bar chart */}\n          {chartType === \"bar\" &&\n            filteredData.map((d, i) => {\n              const x = getBarX(i);\n              const barHeight = (d.revenue / niceMax) * chartHeight;\n              const y = paddingTop + chartHeight - barHeight;\n              const isHighlighted = resolvedHighlight === i;\n\n              return (\n                <g key={`bar-${i}`}>\n                  <rect\n                    x={x}\n                    y={y}\n                    width={barWidth}\n                    height={barHeight}\n                    rx={3}\n                    className={cn(\n                      \"transition-all duration-300\",\n                      isHighlighted ? \"fill-emerald-400\" : \"fill-blue-500\"\n                    )}\n                    fillOpacity={isHighlighted ? 0.9 : 0.7}\n                    filter={isHighlighted ? \"url(#glow)\" : undefined}\n                  />\n                  {/* Hover area for tooltip-like effect */}\n                  <rect\n                    x={x}\n                    y={paddingTop}\n                    width={barWidth}\n                    height={chartHeight}\n                    fill=\"transparent\"\n                  />\n                </g>\n              );\n            })}\n\n          {/* Line chart */}\n          {chartType === \"line\" && filteredData.length > 0 && (\n            <>\n              {/* Area fill under line */}\n              <path\n                d={`${linePath} L ${getPointX(filteredData.length - 1)} ${paddingTop + chartHeight} L ${getPointX(0)} ${paddingTop + chartHeight} Z`}\n                fill=\"url(#lineGradient)\"\n                opacity={0.15}\n              />\n              <defs>\n                <linearGradient\n                  id=\"lineGradient\"\n                  x1=\"0\"\n                  y1=\"0\"\n                  x2=\"0\"\n                  y2=\"1\"\n                >\n                  <stop offset=\"0%\" stopColor=\"#8b5cf6\" />\n                  <stop offset=\"100%\" stopColor=\"#8b5cf6\" stopOpacity=\"0\" />\n                </linearGradient>\n              </defs>\n\n              {/* Line path */}\n              <path\n                d={linePath}\n                fill=\"none\"\n                stroke=\"#8b5cf6\"\n                strokeWidth=\"2.5\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              />\n\n              {/* Data points */}\n              {filteredData.map((d, i) => {\n                const x = getPointX(i);\n                const y = scaleY(d.revenue);\n                const isHighlighted = resolvedHighlight === i;\n\n                return (\n                  <circle\n                    key={`point-${i}`}\n                    cx={x}\n                    cy={y}\n                    r={isHighlighted ? 6 : 4}\n                    className={cn(\n                      \"transition-all duration-300\",\n                      isHighlighted ? \"fill-emerald-400\" : \"fill-violet-400\"\n                    )}\n                    stroke={isHighlighted ? \"#10b981\" : \"#8b5cf6\"}\n                    strokeWidth=\"2\"\n                    filter={isHighlighted ? \"url(#glow)\" : undefined}\n                  />\n                );\n              })}\n            </>\n          )}\n\n          {/* X-axis month labels */}\n          {filteredData.map((d, i) => {\n            const x = getPointX(i);\n            return (\n              <text\n                key={`label-${i}`}\n                x={x}\n                y={paddingTop + chartHeight + 20}\n                textAnchor=\"middle\"\n                className=\"fill-muted-foreground\"\n                fontSize=\"11\"\n              >\n                {d.month}\n              </text>\n            );\n          })}\n\n          {/* Revenue values on top of bars / points */}\n          {filteredData.map((d, i) => {\n            const x = getPointX(i);\n            const y =\n              chartType === \"bar\"\n                ? paddingTop + chartHeight - (d.revenue / niceMax) * chartHeight - 8\n                : scaleY(d.revenue) - 12;\n            const isHighlighted = resolvedHighlight === i;\n\n            return (\n              <text\n                key={`value-${i}`}\n                x={x}\n                y={y}\n                textAnchor=\"middle\"\n                fontSize=\"10\"\n                className={cn(\n                  isHighlighted\n                    ? \"fill-emerald-400 font-semibold\"\n                    : \"fill-muted-foreground\"\n                )}\n              >\n                {formatRevenue(d.revenue)}\n              </text>\n            );\n          })}\n\n          {/* Annotations */}\n          {resolvedAnnotations.map((ann, i) => {\n            const x = getPointX(ann.offsetIndex);\n            const dataPoint = filteredData[ann.offsetIndex];\n            const baseY =\n              chartType === \"bar\"\n                ? paddingTop +\n                  chartHeight -\n                  (dataPoint.revenue / niceMax) * chartHeight -\n                  22\n                : scaleY(dataPoint.revenue) - 26;\n\n            return (\n              <g key={`ann-${i}`}>\n                {/* Annotation line */}\n                <line\n                  x1={x}\n                  y1={baseY + 10}\n                  x2={x}\n                  y2={baseY + 18}\n                  stroke=\"#f59e0b\"\n                  strokeWidth=\"1\"\n                  strokeOpacity={0.5}\n                />\n                {/* Annotation background */}\n                <rect\n                  x={x - 40}\n                  y={baseY - 8}\n                  width={80}\n                  height={18}\n                  rx={4}\n                  fill=\"#f59e0b\"\n                  fillOpacity={0.15}\n                  stroke=\"#f59e0b\"\n                  strokeOpacity={0.3}\n                  strokeWidth=\"1\"\n                />\n                {/* Annotation text */}\n                <text\n                  x={x}\n                  y={baseY + 5}\n                  textAnchor=\"middle\"\n                  fontSize=\"9\"\n                  className=\"fill-amber-400 font-medium\"\n                >\n                  {ann.label.length > 14\n                    ? ann.label.slice(0, 12) + \"...\"\n                    : ann.label}\n                </text>\n              </g>\n            );\n          })}\n        </svg>\n      </div>\n\n      {/* Footer */}\n      <div className=\"mt-2 flex items-center justify-between px-1 text-xs text-muted-foreground\">\n        <span>\n          Showing {filteredData.length} of {data.length} months\n        </span>\n        <div className=\"flex items-center gap-3\">\n          {chartType === \"bar\" && (\n            <span className=\"flex items-center gap-1.5\">\n              <span className=\"inline-block h-2.5 w-2.5 rounded-sm bg-blue-500/70\" />\n              Revenue\n            </span>\n          )}\n          {chartType === \"line\" && (\n            <span className=\"flex items-center gap-1.5\">\n              <span className=\"inline-block h-0.5 w-4 rounded bg-violet-400\" />\n              Revenue\n            </span>\n          )}\n          {resolvedHighlight !== null && (\n            <span className=\"flex items-center gap-1.5 text-emerald-400\">\n              <span className=\"inline-block h-2.5 w-2.5 rounded-full bg-emerald-400/70\" />\n              Highlighted\n            </span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}