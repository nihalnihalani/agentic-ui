{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "copilot-timeline",
  "type": "registry:component",
  "title": "CopilotTimeline",
  "description": "Timeline and roadmap view with AI milestone management.",
  "dependencies": [
    "@copilotkit/react-core",
    "lucide-react"
  ],
  "registryDependencies": [],
  "docs": "## Setup\n\n### 1. Install CopilotKit dependencies\n\n```bash\nnpm install @copilotkit/react-core @copilotkit/react-ui @copilotkit/runtime\n```\n\n### 2. Create an API route\n\nCreate `app/api/copilotkit/route.ts`:\n\n```ts\nimport {\n  CopilotRuntime,\n  OpenAIAdapter,\n  copilotRuntimeNextJSAppRouterEndpoint,\n} from \"@copilotkit/runtime\";\n\nexport const maxDuration = 60;\n\nconst runtime = new CopilotRuntime();\nconst serviceAdapter = new OpenAIAdapter();\n\nconst { handleRequest } = copilotRuntimeNextJSAppRouterEndpoint({\n  runtime,\n  serviceAdapter,\n  endpoint: \"/api/copilotkit\",\n});\n\nexport { handleRequest as POST };\n```\n\n### 3. Environment variables\n\nAdd to `.env.local`:\n\n```\nOPENAI_API_KEY=sk-...\n```\n\n### 4. Wrap your app with CopilotKit\n\nIn your page or layout, wrap the component tree with the CopilotKit provider and add a chat UI:\n\n```tsx\n\"use client\";\nimport { CopilotKit } from \"@copilotkit/react-core\";\nimport { CopilotPopup } from \"@copilotkit/react-ui\";\nimport \"@copilotkit/react-ui/styles.css\";\n\nexport default function Page() {\n  return (\n    <CopilotKit runtimeUrl=\"/api/copilotkit\">\n      {/* your components here */}\n      <CopilotPopup />\n    </CopilotKit>\n  );\n}\n```\n\n## Usage\n\n```tsx\nimport { CopilotTimeline } from \"@/components/copilot-timeline\";\n\n<CopilotTimeline />\n```\n\nThe component includes sample milestones. Pass your own:\n\n```tsx\nimport { CopilotTimeline, TimelineMilestone } from \"@/components/copilot-timeline\";\n\nconst milestones: TimelineMilestone[] = [\n  { id: \"1\", title: \"Kickoff\", description: \"Project start\", date: \"Jan 1\", status: \"completed\" },\n  { id: \"2\", title: \"MVP\", description: \"First release\", date: \"Mar 1\", status: \"in-progress\" },\n];\n\n<CopilotTimeline initialMilestones={milestones} />\n```\n\nAsk the AI to add milestones, update statuses, or reorder the timeline.",
  "files": [
    {
      "path": "registry/copilot-timeline.tsx",
      "content": "\"use client\";\n\nimport { useState, useCallback, useRef } from \"react\";\nimport { useCopilotReadable, useCopilotAction } from \"@copilotkit/react-core\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  Circle,\n  CheckCircle2,\n  Clock,\n  Loader2,\n  Sparkles,\n  CheckCircle,\n} from \"lucide-react\";\n\nexport interface TimelineMilestone {\n  id: string;\n  title: string;\n  description: string;\n  date: string;\n  status: \"pending\" | \"in-progress\" | \"completed\";\n}\n\nconst defaultMilestones: TimelineMilestone[] = [\n  {\n    id: \"ms-1\",\n    title: \"Project Kickoff\",\n    description: \"Initial planning, team alignment, and project scope definition\",\n    date: \"Jan 15, 2025\",\n    status: \"completed\",\n  },\n  {\n    id: \"ms-2\",\n    title: \"User Research\",\n    description: \"Conduct user interviews, surveys, and competitive analysis\",\n    date: \"Feb 1, 2025\",\n    status: \"completed\",\n  },\n  {\n    id: \"ms-3\",\n    title: \"Design Phase\",\n    description: \"Create wireframes, prototypes, and finalize the design system\",\n    date: \"Feb 20, 2025\",\n    status: \"completed\",\n  },\n  {\n    id: \"ms-4\",\n    title: \"Development Sprint 1\",\n    description: \"Core feature implementation and infrastructure setup\",\n    date: \"Mar 15, 2025\",\n    status: \"completed\",\n  },\n  {\n    id: \"ms-5\",\n    title: \"Alpha Release\",\n    description: \"Internal release for early testing and feedback collection\",\n    date: \"Apr 10, 2025\",\n    status: \"in-progress\",\n  },\n  {\n    id: \"ms-6\",\n    title: \"Beta Launch\",\n    description: \"Public beta release with limited feature set for early adopters\",\n    date: \"May 1, 2025\",\n    status: \"pending\",\n  },\n  {\n    id: \"ms-7\",\n    title: \"QA & Testing\",\n    description: \"Comprehensive quality assurance, performance, and security testing\",\n    date: \"May 20, 2025\",\n    status: \"pending\",\n  },\n  {\n    id: \"ms-8\",\n    title: \"GA Launch\",\n    description: \"General availability release with full feature set and documentation\",\n    date: \"Jun 15, 2025\",\n    status: \"pending\",\n  },\n];\n\ninterface CopilotTimelineProps {\n  initialMilestones?: TimelineMilestone[];\n  className?: string;\n}\n\nconst statusConfig = {\n  completed: {\n    color: \"bg-emerald-500\",\n    border: \"border-emerald-500\",\n    text: \"text-emerald-400\",\n    badge: \"bg-emerald-500/10 text-emerald-400 border-emerald-500/30\",\n    icon: CheckCircle2,\n    label: \"Completed\",\n  },\n  \"in-progress\": {\n    color: \"bg-blue-500\",\n    border: \"border-blue-500\",\n    text: \"text-blue-400\",\n    badge: \"bg-blue-500/10 text-blue-400 border-blue-500/30\",\n    icon: Clock,\n    label: \"In Progress\",\n  },\n  pending: {\n    color: \"bg-muted\",\n    border: \"border-muted\",\n    text: \"text-muted-foreground\",\n    badge: \"bg-muted/50 text-muted-foreground border-border/50\",\n    icon: Circle,\n    label: \"Pending\",\n  },\n};\n\nexport function CopilotTimeline({\n  initialMilestones,\n  className,\n}: CopilotTimelineProps) {\n  const [milestones, setMilestones] = useState<TimelineMilestone[]>(\n    initialMilestones ?? defaultMilestones\n  );\n  const [pulsingIds, setPulsingIds] = useState<Set<string>>(new Set());\n  const pulseTimeouts = useRef<Map<string, ReturnType<typeof setTimeout>>>(\n    new Map()\n  );\n\n  const triggerPulse = useCallback((milestoneId: string) => {\n    const existing = pulseTimeouts.current.get(milestoneId);\n    if (existing) clearTimeout(existing);\n\n    setPulsingIds((prev) => new Set(prev).add(milestoneId));\n    const timeout = setTimeout(() => {\n      setPulsingIds((prev) => {\n        const next = new Set(prev);\n        next.delete(milestoneId);\n        return next;\n      });\n      pulseTimeouts.current.delete(milestoneId);\n    }, 1500);\n    pulseTimeouts.current.set(milestoneId, timeout);\n  }, []);\n\n  // Expose timeline state to AI\n  useCopilotReadable({\n    description:\n      \"Current project timeline milestones with their titles, descriptions, dates, and statuses (pending, in-progress, completed)\",\n    value: {\n      totalMilestones: milestones.length,\n      completed: milestones.filter((m) => m.status === \"completed\").length,\n      inProgress: milestones.filter((m) => m.status === \"in-progress\").length,\n      pending: milestones.filter((m) => m.status === \"pending\").length,\n      milestones,\n    },\n  });\n\n  // AI action: add a milestone\n  useCopilotAction({\n    name: \"addMilestone\",\n    description:\n      \"Add a new milestone to the project timeline. It will be appended at the end by default.\",\n    parameters: [\n      {\n        name: \"title\",\n        type: \"string\",\n        description: \"The title of the milestone\",\n        required: true,\n      },\n      {\n        name: \"description\",\n        type: \"string\",\n        description: \"A brief description of the milestone\",\n        required: true,\n      },\n      {\n        name: \"date\",\n        type: \"string\",\n        description: \"The target date for the milestone (e.g. 'Jul 1, 2025')\",\n        required: true,\n      },\n      {\n        name: \"status\",\n        type: \"string\",\n        description:\n          'The status of the milestone: \"pending\", \"in-progress\", or \"completed\"',\n      },\n    ],\n    render: ({ status, args }) => {\n      if (status === \"inProgress\") {\n        return (\n          <div className=\"flex items-center gap-2 rounded-lg border border-border/50 bg-card/50 px-3 py-2 text-sm\">\n            <Loader2 className=\"h-4 w-4 animate-spin text-emerald-400\" />\n            <span>Adding milestone...</span>\n          </div>\n        );\n      }\n      return (\n        <div className=\"flex items-center gap-2 rounded-lg border border-emerald-500/30 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-400\">\n          <CheckCircle className=\"h-4 w-4\" />\n          <span>\n            Added milestone <strong>{args.title}</strong> ({args.date})\n          </span>\n        </div>\n      );\n    },\n    handler: ({ title, description, date, status }) => {\n      const newId = `ms-${Date.now()}-${Math.random().toString(36).slice(2, 7)}`;\n      const newMilestone: TimelineMilestone = {\n        id: newId,\n        title,\n        description,\n        date,\n        status: (status as TimelineMilestone[\"status\"]) || \"pending\",\n      };\n      setMilestones((prev) => [...prev, newMilestone]);\n      triggerPulse(newId);\n      return `Added milestone \"${title}\" on ${date}`;\n    },\n  });\n\n  // AI action: remove a milestone\n  useCopilotAction({\n    name: \"removeMilestone\",\n    description: \"Remove a milestone from the timeline by its ID\",\n    parameters: [\n      {\n        name: \"milestoneId\",\n        type: \"string\",\n        description: `The ID of the milestone to remove. Current milestones: ${milestones.map((m) => `${m.id} (${m.title})`).join(\", \")}`,\n        required: true,\n      },\n    ],\n    render: ({ status, args }) => {\n      if (status === \"inProgress\") {\n        return (\n          <div className=\"flex items-center gap-2 rounded-lg border border-border/50 bg-card/50 px-3 py-2 text-sm\">\n            <Loader2 className=\"h-4 w-4 animate-spin text-red-400\" />\n            <span>Removing milestone...</span>\n          </div>\n        );\n      }\n      return (\n        <div className=\"flex items-center gap-2 rounded-lg border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-400\">\n          <CheckCircle className=\"h-4 w-4\" />\n          <span>\n            Removed milestone <strong>{args.milestoneId}</strong>\n          </span>\n        </div>\n      );\n    },\n    handler: ({ milestoneId }) => {\n      const target = milestones.find((m) => m.id === milestoneId);\n      if (!target) return `Milestone ${milestoneId} not found`;\n      setMilestones((prev) => prev.filter((m) => m.id !== milestoneId));\n      return `Removed milestone \"${target.title}\"`;\n    },\n  });\n\n  // AI action: update milestone status\n  useCopilotAction({\n    name: \"updateStatus\",\n    description:\n      'Update the status of a milestone to \"pending\", \"in-progress\", or \"completed\"',\n    parameters: [\n      {\n        name: \"milestoneId\",\n        type: \"string\",\n        description: `The ID of the milestone to update. Current milestones: ${milestones.map((m) => `${m.id} (${m.title})`).join(\", \")}`,\n        required: true,\n      },\n      {\n        name: \"status\",\n        type: \"string\",\n        description:\n          'The new status: \"pending\", \"in-progress\", or \"completed\"',\n        required: true,\n      },\n    ],\n    render: ({ status, args }) => {\n      if (status === \"inProgress\") {\n        return (\n          <div className=\"flex items-center gap-2 rounded-lg border border-border/50 bg-card/50 px-3 py-2 text-sm\">\n            <Loader2 className=\"h-4 w-4 animate-spin text-blue-400\" />\n            <span>Updating status...</span>\n          </div>\n        );\n      }\n      return (\n        <div className=\"flex items-center gap-2 rounded-lg border border-blue-500/30 bg-blue-500/10 px-3 py-2 text-sm text-blue-400\">\n          <CheckCircle className=\"h-4 w-4\" />\n          <span>\n            Updated <strong>{args.milestoneId}</strong> to{\" \"}\n            <strong>{args.status}</strong>\n          </span>\n        </div>\n      );\n    },\n    handler: ({ milestoneId, status }) => {\n      const validStatuses: TimelineMilestone[\"status\"][] = [\n        \"pending\",\n        \"in-progress\",\n        \"completed\",\n      ];\n      if (!validStatuses.includes(status as TimelineMilestone[\"status\"])) {\n        return `Invalid status \"${status}\". Must be one of: ${validStatuses.join(\", \")}`;\n      }\n      const target = milestones.find((m) => m.id === milestoneId);\n      if (!target) return `Milestone ${milestoneId} not found`;\n      setMilestones((prev) =>\n        prev.map((m) =>\n          m.id === milestoneId\n            ? { ...m, status: status as TimelineMilestone[\"status\"] }\n            : m\n        )\n      );\n      triggerPulse(milestoneId);\n      return `Updated \"${target.title}\" status to ${status}`;\n    },\n  });\n\n  // AI action: reorder timeline\n  useCopilotAction({\n    name: \"reorderTimeline\",\n    description:\n      \"Reorder the timeline milestones by providing the milestone IDs in the desired order\",\n    parameters: [\n      {\n        name: \"milestoneIds\",\n        type: \"string[]\",\n        description: `Array of milestone IDs in the desired order. Current IDs: ${milestones.map((m) => m.id).join(\", \")}`,\n        required: true,\n      },\n    ],\n    render: ({ status, args }) => {\n      if (status === \"inProgress\") {\n        return (\n          <div className=\"flex items-center gap-2 rounded-lg border border-border/50 bg-card/50 px-3 py-2 text-sm\">\n            <Loader2 className=\"h-4 w-4 animate-spin text-violet-400\" />\n            <span>Reordering timeline...</span>\n          </div>\n        );\n      }\n      return (\n        <div className=\"flex items-center gap-2 rounded-lg border border-violet-500/30 bg-violet-500/10 px-3 py-2 text-sm text-violet-400\">\n          <CheckCircle className=\"h-4 w-4\" />\n          <span>\n            Reordered <strong>{args.milestoneIds?.length ?? 0}</strong>{\" \"}\n            milestone(s)\n          </span>\n        </div>\n      );\n    },\n    handler: ({ milestoneIds }) => {\n      setMilestones((prev) => {\n        const milestoneMap = new Map(prev.map((m) => [m.id, m]));\n        const reordered = (milestoneIds as string[])\n          .map((id) => milestoneMap.get(id))\n          .filter(Boolean) as TimelineMilestone[];\n        return reordered;\n      });\n      (milestoneIds as string[]).forEach((id) => triggerPulse(id));\n      return `Reordered ${milestoneIds.length} milestone(s)`;\n    },\n  });\n\n  return (\n    <div className={cn(\"relative w-full py-8\", className)}>\n      {/* Header */}\n      <div className=\"mb-8 flex items-center gap-2\">\n        <Sparkles className=\"h-5 w-5 text-violet-400\" />\n        <h2 className=\"text-lg font-semibold text-foreground\">\n          Project Timeline\n        </h2>\n        <span className=\"ml-auto text-xs text-muted-foreground\">\n          {milestones.filter((m) => m.status === \"completed\").length}/\n          {milestones.length} completed\n        </span>\n      </div>\n\n      {/* Timeline */}\n      <div className=\"relative\">\n        {/* Center vertical line - desktop */}\n        <div className=\"absolute left-4 top-0 hidden h-full w-0.5 bg-border/50 md:left-1/2 md:block md:-translate-x-px\" />\n\n        {/* Left vertical line - mobile */}\n        <div className=\"absolute left-4 top-0 block h-full w-0.5 bg-border/50 md:hidden\" />\n\n        {/* Milestones */}\n        <div className=\"space-y-8 md:space-y-12\">\n          {milestones.map((milestone, index) => {\n            const config = statusConfig[milestone.status];\n            const StatusIcon = config.icon;\n            const isEven = index % 2 === 0;\n            const isPulsing = pulsingIds.has(milestone.id);\n\n            return (\n              <div\n                key={milestone.id}\n                className={cn(\n                  \"relative flex items-start\",\n                  /* Mobile: always left-aligned */\n                  \"pl-12\",\n                  /* Desktop: alternate sides */\n                  \"md:pl-0\",\n                  isEven ? \"md:flex-row\" : \"md:flex-row-reverse\"\n                )}\n              >\n                {/* Status indicator on the line - mobile */}\n                <div\n                  className={cn(\n                    \"absolute left-2.5 top-1 z-10 flex h-3.5 w-3.5 items-center justify-center rounded-full border-2 bg-background md:hidden\",\n                    config.border,\n                    isPulsing && \"animate-pulse\"\n                  )}\n                >\n                  <div\n                    className={cn(\"h-1.5 w-1.5 rounded-full\", config.color)}\n                  />\n                </div>\n\n                {/* Status indicator on the line - desktop */}\n                <div\n                  className={cn(\n                    \"absolute left-1/2 top-3 z-10 hidden h-4 w-4 -translate-x-1/2 items-center justify-center rounded-full border-2 bg-background md:flex\",\n                    config.border,\n                    isPulsing && \"animate-pulse\"\n                  )}\n                >\n                  <div\n                    className={cn(\"h-2 w-2 rounded-full\", config.color)}\n                  />\n                </div>\n\n                {/* Card */}\n                <div\n                  className={cn(\n                    \"w-full md:w-[calc(50%-2rem)]\",\n                    isEven ? \"md:pr-0\" : \"md:pl-0\"\n                  )}\n                >\n                  <div\n                    className={cn(\n                      \"rounded-lg border border-border/50 bg-card/50 p-4 backdrop-blur-sm transition-all duration-300 hover:border-border/80 hover:shadow-sm\",\n                      isPulsing &&\n                        \"border-violet-500/60 shadow-[0_0_12px_rgba(139,92,246,0.3)]\"\n                    )}\n                  >\n                    {/* Date and status row */}\n                    <div className=\"mb-2 flex items-center justify-between gap-2\">\n                      <span className=\"text-xs text-muted-foreground\">\n                        {milestone.date}\n                      </span>\n                      <span\n                        className={cn(\n                          \"inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-[10px] font-medium\",\n                          config.badge\n                        )}\n                      >\n                        <StatusIcon className=\"h-3 w-3\" />\n                        {config.label}\n                      </span>\n                    </div>\n\n                    {/* Title */}\n                    <h3 className=\"text-sm font-semibold text-foreground\">\n                      {milestone.title}\n                    </h3>\n\n                    {/* Description */}\n                    <p className=\"mt-1 text-xs leading-relaxed text-muted-foreground\">\n                      {milestone.description}\n                    </p>\n\n                    {/* Milestone ID */}\n                    <div className=\"mt-3 flex items-center gap-1.5\">\n                      <span className=\"font-mono text-[10px] text-muted-foreground/60\">\n                        {milestone.id}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Empty state */}\n      {milestones.length === 0 && (\n        <div className=\"flex flex-col items-center justify-center rounded-lg border border-dashed border-border/50 py-12 text-center\">\n          <Circle className=\"mb-2 h-8 w-8 text-muted-foreground/40\" />\n          <p className=\"text-sm text-muted-foreground\">\n            No milestones yet. Ask the AI to add one!\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n",
      "type": "registry:component"
    }
  ]
}